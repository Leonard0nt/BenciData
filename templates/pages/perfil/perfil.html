{% extends "components/Layout/base_pages.html" %}
{% load static %} 
{% load tailwind_filters %}

{% block head_title %}
  Edidar Perfil
{% endblock head_title %}

{% block content_pages %}

  <h1 class="max-w-2xl font-bold tracking-tight text-gray-900 text-2xl mb-4">Editar Perfil</h1>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    
    {% include 'components/input_perfil.html' with img=request.user.profile.image.url %}

    {{ user_form|crispy }}
    <label for="id_phone" class="block text-gray-700 text-sm font-bold mb-2">Teléfono</label>
    {{ profile_form.phone }}

    <label for="{{ profile_form.examen_medico.id_for_label }}" class="block text-gray-700 text-sm font-bold mb-2">Examen Médico</label>
    {{ profile_form.examen_medico }}
    {% if request.user.profile.examen_medico %}
      <a href="{{ request.user.profile.examen_medico.url }}" class="text-indigo-600 text-sm" download>Descargar examen médico</a>
    {% endif %}

    <label for="{{ profile_form.contrato.id_for_label }}" class="block text-gray-700 text-sm font-bold mb-2 mt-4">Contrato</label>
    {{ profile_form.contrato }}
    {% if request.user.profile.contrato %}
      <a href="{{ request.user.profile.contrato.url }}" class="text-indigo-600 text-sm" download>Descargar contrato</a>
    {% endif %}

    {% include "components/btn/button.html" with button_text="Guardar cambios" %}
    {% if messages %}
      {% for message in messages %}
        {% if "error" in message.tags %}
          <strong>{{ message }}</strong>
        {% endif %}
      {% endfor %}
    {% endif %}
  </form>

  {% include 'components/mensajes.html' %}  

{% endblock content_pages %}

{% block javascript %}

  <script defer src="{% static "js/script.js" %}"></script>

{% endblock javascript %}
